<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Absensi Desa</title>
<style>
body{font-family:Arial;background:#f2f2f2;padding:20px}
.card{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px}
input,select,button{padding:6px;margin:4px}
</style>
</head>
<body>

<h2>ðŸ“‹ Absensi Perangkat Desa</h2>

<div class="card">
<input id="id" placeholder="ID">
<input id="nama" placeholder="Nama">
<input id="jabatan" placeholder="Jabatan">
<input id="alamat" placeholder="Alamat">
<button onclick="save()">Simpan</button>
</div>

<div class="card">
<input id="scanId" placeholder="ID Karyawan">
<select id="type">
<option value="masuk">Masuk</option>
<option value="pulang">Pulang</option>
</select>
<button onclick="scan()">Scan</button>
</div>

<div class="card">
<button onclick="load()">Tampilkan Data</button>
<pre id="out"></pre>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbyFaKC0c7sQROkE9_Rw1evMVw1xtUDuLa8Ht-Rj-Ua5avb3kudCNfKHYKkJjayzrZzeoA/exec";

function post(action,payload={}){
 const form = new FormData();
 form.append("data", JSON.stringify({action,...payload}));

 return fetch(API,{method:"POST",body:form})
        .then(r=>r.json());
}

function save(){
 post("SAVE",{
   id:id.value,
   nama:nama.value,
   jabatan:jabatan.value,
   alamat:alamat.value
 }).then(r=>alert(r.msg));
}

function scan(){
 post("SCAN",{
   id:scanId.value,
   type:type.value
 }).then(r=>alert(r.msg));
}

function load(){
 post("GET").then(r=>{
   out.textContent = JSON.stringify(r,null,2);
 });
}
</script>

</body>
</html>
